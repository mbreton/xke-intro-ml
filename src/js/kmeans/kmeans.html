<!doctype html>
<html>
<head>
    <title>Kmeans</title>
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <link rel="stylesheet" type="text/css" href="../../vendor/mocha/mocha.css">
</head>
<body class="kmean">
    <div id="mocha"></div>
    <canvas id="kmeans-canvas" width="500" height="500"></canvas>

    <!-- Scripts -->
    <script src="../../vendor/lodash/dist/lodash.min.js"></script>
    <script src="../../vendor-offline/sinon-1.7.3.js"></script>
    <script src="../../vendor/mocha/mocha.js"></script>
    <script src="../../vendor/chai/chai.js"></script>
    <script src="../../vendor-offline/chai-things.js"></script>
    <script src="kmeansTests.js"></script>
    <script src="kmeans.js"></script>
    <script>
        function start() {

            mocha.run(function(){
            });

            function noise(centroid, x) {
                var d = distance(centroid, x);

                if (d < 0.1) {
                    return [
                        x[0] + randFloat(0.1, 0.2),
                        x[1] + randFloat(0.1, 0.2)
                    ]
                }
                return x;
            }

            var data = kmeansGenerateDataset(4, 30, noise),
                    kmeansCanvas = document.getElementById('kmeans-canvas'),
                    drawingContext = new KmeansDrawingContext(kmeansCanvas)

            var clusters = kmeans(data.points, 4),
                    centroids = clusters.centroids,
                    colors = ["#9061C2",
                        "#14B694",
                        "#EB540A",
                        "#A18F68"];

            for (var i = 0; i < centroids.length; i++) {
                drawingContext.cross(centroids[i], colors[i]);
                drawingContext.renderDataSet(clusters.partition[i], colors[i]);
            }
        }
    </script>
</body>
</html>
